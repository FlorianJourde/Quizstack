{% extends 'layout.html.twig' %}

{% set title = 'Add question' %}

{% block body %}

    {{ include('partials/banner.html.twig') }}

    <div class="wrapper">
        <div class="page-header-container">
            <h1 class="big-title grow">Propose a question</h1>
            <div class="buttons-container">
                <a class="button button-action" href="{{ path('questions') }}">
                    <span class="material-icons">arrow_back</span>
                </a>
            </div>
        </div>
    </div>

    <div class="wrapper">
        <div class="form-container glass box bg-dark-grey-secondary">

            <div id="errorMessage" class="error-message"></div>
            <div id="successMessage" class="success-message"></div>

            {% if is_granted('ROLE_ADMIN') %}
                {{ include('partials/question/autocomplete.html.twig') }}
            {% endif %}

            {{ include('partials/form/errors.html.twig') }}

            {{ form_start(form) }}

            {{ include('partials/question/content.html.twig', _context) }}
            {{ include('partials/question/explanation.html.twig', _context) }}
            {{ include('partials/form/image.html.twig', _context) }}
            {{ include('partials/question/difficulty.html.twig', _context) }}
            {{ include('partials/question/categories.html.twig', _context) }}
            {{ include('partials/question/status.html.twig', _context) }}
            {{ include('partials/question/choices.html.twig', _context) }}

            {{ form_row(form._token) }}

            <div class="buttons-container mb-4">
                <a href="{{ path('questions') }}" class="button button-tertiary">Cancel</a>
                <button type="submit" class="button button-primary">Submit</button>
            </div>

            {{ form_end(form, {'render_rest': false}) }}
        </div>
    </div>

    {% if is_granted('ROLE_ADMIN') %}
        <div class="wrapper">
            <div class="page-separator-container">
                <h2 class="title">Generation helpers</h2>
            </div>
        </div>

        <div class="wrapper">
            <div class="form-container glass box bg-dark-grey-secondary">
                {{ include('partials/question/splitter.html.twig') }}
                {{ include('partials/question/generator.html.twig') }}
            </div>
        </div>
    {% endif %}

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('question-autocomplete') }}
    {{ encore_entry_script_tags('file-splitter') }}
{% endblock %}